{"componentChunkName":"component---src-templates-post-js","path":"/introducing-nanopayments/","webpackCompilationHash":"7e2bf53d800c88ebe4a6","result":{"data":{"ghostPost":{"id":"Ghost__Post__5dd46444c9410b04e25f76fe","title":"Introducing Nanopayments","slug":"introducing-nanopayments","featured":true,"feature_image":"https://blog.orchid.com/content/images/2019/11/0_YRVa4KCxz9TqxH_t.gif","excerpt":"When you wake up in the morning and flick on a light switch, do you pause to think about how many tiny fractions of a penny that electricity costs? Or do you just flick on the light so you don’t bump your head?\n","custom_excerpt":"When you wake up in the morning and flick on a light switch, do you pause to think about how many tiny fractions of a penny that electricity costs? Or do you just flick on the light so you don’t bump your head?\n","created_at_pretty":"19 November, 2019","published_at_pretty":"09 October, 2019","updated_at_pretty":"22 November, 2019","created_at":"2019-11-19T21:53:08.000+00:00","published_at":"2019-10-09T10:00:00.000+00:00","updated_at":"2019-11-22T00:42:19.000+00:00","meta_title":null,"meta_description":null,"og_description":null,"og_image":null,"og_title":null,"twitter_description":null,"twitter_image":null,"twitter_title":null,"authors":[{"name":"Orchid","slug":"orchid","bio":null,"profile_image":"https://blog.orchid.com/content/images/2019/10/2_0y0sC7D-09bw2x2A3Wzchw.png","twitter":null,"facebook":null,"website":null}],"primary_author":{"name":"Orchid","slug":"orchid","bio":null,"profile_image":"https://blog.orchid.com/content/images/2019/10/2_0y0sC7D-09bw2x2A3Wzchw.png","twitter":null,"facebook":null,"website":null},"primary_tag":null,"tags":[],"plaintext":"When you wake up in the morning and flick on a light switch, do you pause to\nthink about how many tiny fractions of a penny that electricity costs? Or do you\njust flick on the light so you don’t bump your head?\n\nAnd if you could pay for other kinds of services the same way you pay for\nelectricity — a tiny flow of resources that could be turned on or off at any\nmoment — what possibilities would that open up?\n\nOrchid’s novel layer 2 scaling architecture for Ethereum uses probabilistic\nnanopayments to allow users to pay for services in just this way. Nanopayments\nare what they sound like: they are tiny, and you can turn them on or off at\nwill. But unlike a monthly electric bill, nanopayments transmit value as they\nmove. We’re using this core technology to power our bandwidth marketplace, which\nis intended to offer users of the Orchid App a new way to construct VPN routes\nand manage them — just like flicking on a light switch.\n\nScaling payments on Ethereum with Orchid\nThe Orchid Network’s bandwidth marketplace is two-sided, comprising buyers\n(Orchid App users) and sellers (Orchid Server operators). The exchange of\nbandwidth requires a high transaction throughput to support both basic service\nand payments. Payments are expected to be made at a per-packet level with high\nfrequency. Ethereum’s layer 1 would be too slow and expensive to settle nano\ntransactions at the level of bandwidth exchange required between buyers and\nsellers in the ecosystem. To solve this issue, Orchid uses an advanced payments\narchitecture known as probabilistic nanopayments for per-packet network\npayments.\n\nExisting layer 2 scaling solutions\nSeveral layer 2 scaling proposals already exist, including the Lightning Network\n[https://lightning.network/] on Bitcoin and the Raiden Network\n[https://raiden.network/] on Ethereum. Both of these approaches fall into the\ncategory of networked payment channels, which could, in theory, serve as the\npayments layer for Orchid’s bandwidth marketplace.\n\nHowever, networked payment channels have several key disadvantages. They require\nusers to deposit and lockup funds with specific network nodes, creating\ncounterparty risk. The cost of a payment using networked payment channels is\nessentially O(log N), compared with O(C) for probabilistic payments, making them\nless scaling efficient. Network channel payments can also fail to route or fail\nto deliver in a timely manner if a single node in the circuit fails. Finally,\nthey leak payment information to more parties than stochastic payments. For\nthese reasons, network payment channels are less practical than nanopayments for\nOrchid’s use case.\n\nOrchid Nanopayments: how they work\nInstead of sending a transaction worth $1 directly, with probabilistic payments\nthe buyer could send a 1% chance of winning $100. Orchid’s design takes this to\nan extreme, with nanopayment tickets representing the value of thousandths of a\npenny, or smaller. The tickets are all sent off-chain; only when a winning\nticket is redeemed would its receiver have to make an on-chain transaction to\nclaim the face value amount, which is rare. The receiver has no way to know if a\nticket is a winner beforehand, therefore giving all tickets implied value.\n\nThe expected flow of nanopayments\n * Sender opens nanopayment account by depositing OXT into an Ethereum smart\n   contract.\n * Sender can then issue valid nanopayments, backed by the deposit, to any\n   provider on the network that is accepting payments for service.\n * Eventually, the user is expected to issue a nanopayment that “wins”, which\n   allows the provider to redeem the ticket as a payment via an on-chain\n   transaction.\n * The user may or may not need to add more OXT to their nanopayment account,\n   depending on the level of funds in the account.\n * Over time, the value transmitted on-chain will in expectation match the value\n   represented in the probabilistic nanopayments.\n\nThe graphic above demonstrates how the Orchid App users are expected to be able\nto send nanopayments to multiple providers after incurring a single deposit\nsetup on the Ethereum blockchain, as well as how the general flow of payments is\nintended to operate.\n\nWe believe the general properties of this system are well suited for a bandwidth\nmarketplace, where the user requires the ability to select different providers\nat will and for them to very quickly establish a payment-for-services\nrelationship. Users should be able to quickly change VPN providers arbitrarily\nbased on speed, availability, price and/or location. The setup of the\nnanopayment account on Ethereum is structured to be shouldered by the user, but\nis compatible with the current VPN market where users sign monthly, annual, or\neven multi-annual agreements with providers for VPN service. The Orchid user is\nexpected to have the added benefit of being able to take back the deposit from\nthe nanopayment account if they stop using the service.\n\nBalance Variance\nOrchid nanopayments do have one notable limitation: variance. Each time the\nOrchid App issues a nanopayment, there is a small independent probability of a\nwinning ticket, which would decrease the receiver’s account balance. If the\nclient’s balance was only large enough to cover a single winner, this would be a\nserious limitation. To illustrate this, imagine a client issuing tickets that\nhave a 1-in-a-million chance of $2 at a rate of 1 million per week. While on\naverage there will only be 1 winner per week, there is a reasonable probability\nthat the winning ticket will be issued on the first day or even in the first few\nhours. On the plus side, there’s also a reasonable chance the winner won’t pop\nup for a few weeks. Fortunately we believe there’s a fairly simple solution:\nclients can just deposit a multiple of the face value, thereby smoothing out the\nvariance. If we model this as a binomial distribution and if the client has $20\nin their account instead of $2, the chance of their balance being depleted twice\nas fast as expected is reduced from around 10% to about 2%.\n\nPayment Anonymity\nMost nanopayment tickets do not “win,” and therefore would not be posted\non-chain. However, rare winning tickets result in a public record on the\nEthereum blockchain. Therefore, Orchid nanopayments are only pseudo-anonymous.\nFor multi-hop circuits, it is anticipated that the Orchid client uses a separate\naccount for each hop, which helps prevent anyone tracing the circuit using\npublic payment information. As winning tickets are rare — anticipated to be\napproximately once per week in common circumstances — the public payment record\nfrom a multi-hop circuit is designed to appear essentially indistinguishable\nfrom that of a single-hop circuit. We expect that an adversary trying to trace\nthe route will learn some of the payment providers associated with a payer’s\npublic address, but the probability of two or more winning tickets to different\nnodes in the same circuit at the same time is vanishingly small, which reduces\nthe traceability of transactions.\n\nCensorship resistance\nAs on most public blockchain networks, Ethereum transactions cannot be censored\nunless their validators (miners in the Ethereum network) choose not to include\nthem in their created blocks. As blocks are mined randomly among all miners in\nproportion to hash power, the vast majority of miners would have to actively\ncensor Orchid payments to significantly disrupt the Orchid Network. For example,\nif 90% of the hash power chose not to include Orchid-related transactions, the\nOrchid Network would still function, albeit with transactions taking, on\naverage, ten times longer to confirm.\n\nA more severe form of censorship would be possible if a large group of miners —\nsay 51% — chose to censor Orchid-related transactions by rejecting blocks that\nincluded them. This would be valid according to the rules of the Ethereum\nprotocol, and would effectively create a soft fork. However, organizing\nlarge-scale miner collusion to create such a soft fork carries significant risk\nof financial loss for the colluders; if the soft fork fails to achieve\nsufficient hashing power, the colluding miners would miss out on their block\nrewards. Even without the risk of financial loss, we consider this possibility\nextremely unlikely due to the decentralized nature of Ethereum mining\ncommunities and the lack of legal and regulatory limitations on blockchain\nmining strategies.\n\nConclusion\nWe believe that Orchid nanopayments have advantages over existing payment\nchannel solutions and are optimized to provide a continuous service to users.\nThe reduction in transaction fees makes it possible to support up to millions of\nusers, without requiring any upgrades to Ethereum itself. Setup costs are not\npairwise, but are only incurred by the user to start. This means providers are\nexpected to be able to immediately begin servicing users without incurring setup\ncosts and users are expected to have the ability to switch between providers on\na whim, which we view as a design requirement for a modern-day VPN application.\n\nStay Up to date with Orchid\nIf you want to keep current on the latest Orchid news and be among the first to\ntest out the network and use the Orchid Token, sign up to our newsletter\n[https://www.orchid.com/#newsletter-signup] for launch updates.\n\nWebsite: www.orchid.com [http://www.orchid.com/]\n\nTwitter: https://twitter.com/OrchidProtocol\n\nLinkedin: https://www.linkedin.com/company/orchidprotocol/\n\nTelegram (Announcements): https://t.me/officialorchidlabs\n\nTelegram (Community): https://t.me/OrchidOfficial\n\nFacebook: https://www.facebook.com/OrchidProtocol/\n\nMedium: https://medium.com/orchid-labs\n\nGithub: https://github.com/OrchidProtocol\n\nReddit: https://www.reddit.com/r/orchid","html":"<p>When you wake up in the morning and flick on a light switch, do you pause to think about how many tiny fractions of a penny that electricity costs? Or do you just flick on the light so you don’t bump your head?</p><p>And if you could pay for other kinds of services the same way you pay for electricity — a tiny flow of resources that could be turned on or off at any moment — what possibilities would that open up?</p><p>Orchid’s novel layer 2 scaling architecture for Ethereum uses probabilistic nanopayments to allow users to pay for services in just this way. Nanopayments are what they sound like: they are tiny, and you can turn them on or off at will. But unlike a monthly electric bill, nanopayments transmit value as they move. We’re using this core technology to power our bandwidth marketplace, which is intended to offer users of the Orchid App a new way to construct VPN routes and manage them — just like flicking on a light switch.</p><!--kg-card-begin: markdown--><h2 id=\"scalingpaymentsonethereumwithorchid\">Scaling payments on Ethereum with Orchid</h2>\n<!--kg-card-end: markdown--><p>The Orchid Network’s bandwidth marketplace is two-sided, comprising buyers (Orchid App users) and sellers (Orchid Server operators). The exchange of bandwidth requires a high transaction throughput to support both basic service and payments. Payments are expected to be made at a per-packet level with high frequency. Ethereum’s layer 1 would be too slow and expensive to settle nano transactions at the level of bandwidth exchange required between buyers and sellers in the ecosystem. To solve this issue, Orchid uses an advanced payments architecture known as probabilistic nanopayments for per-packet network payments.</p><!--kg-card-begin: markdown--><h2 id=\"existinglayer2scalingsolutions\">Existing layer 2 scaling solutions</h2>\n<!--kg-card-end: markdown--><p>Several layer 2 scaling proposals already exist, including the <a href=\"https://lightning.network/\" rel=\"noopener nofollow\">Lightning Network</a> on Bitcoin and the <a href=\"https://raiden.network/\" rel=\"noopener nofollow\">Raiden Network</a> on Ethereum. Both of these approaches fall into the category of networked payment channels, which could, in theory, serve as the payments layer for Orchid’s bandwidth marketplace.</p><p>However, networked payment channels have several key disadvantages. They require users to deposit and lockup funds with specific network nodes, creating counterparty risk. The cost of a payment using networked payment channels is essentially O(log N), compared with O(C) for probabilistic payments, making them less scaling efficient. Network channel payments can also fail to route or fail to deliver in a timely manner if a single node in the circuit fails. Finally, they leak payment information to more parties than stochastic payments. For these reasons, network payment channels are less practical than nanopayments for Orchid’s use case.</p><!--kg-card-begin: markdown--><h2 id=\"orchidnanopaymentshowtheywork\">Orchid Nanopayments: how they work</h2>\n<!--kg-card-end: markdown--><p>Instead of sending a transaction worth $1 directly, with probabilistic payments the buyer could send a 1% chance of winning $100. Orchid’s design takes this to an extreme, with nanopayment tickets representing the value of thousandths of a penny, or smaller. The tickets are all sent off-chain; only when a winning ticket is redeemed would its receiver have to make an on-chain transaction to claim the face value amount, which is rare. The receiver has no way to know if a ticket is a winner beforehand, therefore giving all tickets implied value.</p><!--kg-card-begin: markdown--><h2 id=\"theexpectedflowofnanopayments\">The expected flow of nanopayments</h2>\n<!--kg-card-end: markdown--><!--kg-card-begin: markdown--><ul>\n<li>Sender opens nanopayment account by depositing OXT into an Ethereum smart contract.</li>\n<li>Sender can then issue valid nanopayments, backed by the deposit, to any provider on the network that is accepting payments for service.</li>\n<li>Eventually, the user is expected to issue a nanopayment that “wins”, which allows the provider to redeem the ticket as a payment via an on-chain transaction.</li>\n<li>The user may or may not need to add more OXT to their nanopayment account, depending on the level of funds in the account.</li>\n<li>Over time, the value transmitted on-chain will in expectation match the value represented in the probabilistic nanopayments.</li>\n</ul>\n<!--kg-card-end: markdown--><!--kg-card-begin: image--><figure class=\"kg-card kg-image-card\"><img src=\"https://blog.orchid.com/content/images/2019/11/image-5.png\" class=\"kg-image\" alt=\"Nanopayments\"></figure><!--kg-card-end: image--><p>The graphic above demonstrates how the Orchid App users are expected to be able to send nanopayments to multiple providers after incurring a single deposit setup on the Ethereum blockchain, as well as how the general flow of payments is intended to operate.</p><p>We believe the general properties of this system are well suited for a bandwidth marketplace, where the user requires the ability to select different providers at will and for them to very quickly establish a payment-for-services relationship. Users should be able to quickly change VPN providers arbitrarily based on speed, availability, price and/or location. The setup of the nanopayment account on Ethereum is structured to be shouldered by the user, but is compatible with the current VPN market where users sign monthly, annual, or even multi-annual agreements with providers for VPN service. The Orchid user is expected to have the added benefit of being able to take back the deposit from the nanopayment account if they stop using the service.</p><!--kg-card-begin: markdown--><h2 id=\"balancevariance\">Balance Variance</h2>\n<!--kg-card-end: markdown--><p>Orchid nanopayments do have one notable limitation: variance. Each time the Orchid App issues a nanopayment, there is a small independent probability of a winning ticket, which would decrease the receiver’s account balance. If the client’s balance was only large enough to cover a single winner, this would be a serious limitation. To illustrate this, imagine a client issuing tickets that have a 1-in-a-million chance of $2 at a rate of 1 million per week. While on average there will only be 1 winner per week, there is a reasonable probability that the winning ticket will be issued on the first day or even in the first few hours. On the plus side, there’s also a reasonable chance the winner won’t pop up for a few weeks. Fortunately we believe there’s a fairly simple solution: clients can just deposit a multiple of the face value, thereby smoothing out the variance. If we model this as a binomial distribution and if the client has $20 in their account instead of $2, the chance of their balance being depleted twice as fast as expected is reduced from around 10% to about 2%.</p><!--kg-card-begin: markdown--><h2 id=\"paymentanonymity\">Payment Anonymity</h2>\n<!--kg-card-end: markdown--><p>Most nanopayment tickets do not “win,” and therefore would not be posted on-chain. However, rare winning tickets result in a public record on the Ethereum blockchain. Therefore, Orchid nanopayments are only pseudo-anonymous. For multi-hop circuits, it is anticipated that the Orchid client uses a separate account for each hop, which helps prevent anyone tracing the circuit using public payment information. As winning tickets are rare — anticipated to be approximately once per week in common circumstances — the public payment record from a multi-hop circuit is designed to appear essentially indistinguishable from that of a single-hop circuit. We expect that an adversary trying to trace the route will learn some of the payment providers associated with a payer’s public address, but the probability of two or more winning tickets to different nodes in the same circuit at the same time is vanishingly small, which reduces the traceability of transactions.</p><!--kg-card-begin: markdown--><h2 id=\"censorshipresistance\">Censorship resistance</h2>\n<!--kg-card-end: markdown--><p>As on most public blockchain networks, Ethereum transactions cannot be censored unless their validators (miners in the Ethereum network) choose not to include them in their created blocks. As blocks are mined randomly among all miners in proportion to hash power, the vast majority of miners would have to actively censor Orchid payments to significantly disrupt the Orchid Network. For example, if 90% of the hash power chose not to include Orchid-related transactions, the Orchid Network would still function, albeit with transactions taking, on average, ten times longer to confirm.</p><p>A more severe form of censorship would be possible if a large group of miners — say 51% — chose to censor Orchid-related transactions by rejecting blocks that included them. This would be valid according to the rules of the Ethereum protocol, and would effectively create a soft fork. However, organizing large-scale miner collusion to create such a soft fork carries significant risk of financial loss for the colluders; if the soft fork fails to achieve sufficient hashing power, the colluding miners would miss out on their block rewards. Even without the risk of financial loss, we consider this possibility extremely unlikely due to the decentralized nature of Ethereum mining communities and the lack of legal and regulatory limitations on blockchain mining strategies.</p><!--kg-card-begin: markdown--><h2 id=\"conclusion\">Conclusion</h2>\n<!--kg-card-end: markdown--><p>We believe that Orchid nanopayments have advantages over existing payment channel solutions and are optimized to provide a continuous service to users. The reduction in transaction fees makes it possible to support up to millions of users, without requiring any upgrades to Ethereum itself. Setup costs are not pairwise, but are only incurred by the user to start. This means providers are expected to be able to immediately begin servicing users without incurring setup costs and users are expected to have the ability to switch between providers on a whim, which we view as a design requirement for a modern-day VPN application.</p><!--kg-card-begin: markdown--><h2 id=\"stayuptodatewithorchid\">Stay Up to date with Orchid</h2>\n<!--kg-card-end: markdown--><p>If you want to keep current on the latest Orchid news and be among the first to test out the network and use the Orchid Token, <a href=\"https://www.orchid.com/#newsletter-signup\" rel=\"noopener nofollow\">sign up to our newsletter</a> for launch updates.</p><p>Website: <a href=\"http://www.orchid.com/\" rel=\"noopener nofollow\">www.orchid.com</a></p><p>Twitter: <a href=\"https://twitter.com/OrchidProtocol\" rel=\"noopener nofollow\">https://twitter.com/OrchidProtocol</a></p><p>Linkedin: <a href=\"https://www.linkedin.com/company/orchidprotocol/\" rel=\"noopener nofollow\">https://www.linkedin.com/company/orchidprotocol/</a></p><p>Telegram (Announcements): <a href=\"https://t.me/officialorchidlabs\" rel=\"noopener nofollow\">https://t.me/officialorchidlabs</a></p><p>Telegram (Community): <a href=\"https://t.me/OrchidOfficial\" rel=\"noopener nofollow\">https://t.me/OrchidOfficial</a></p><p>Facebook: <a href=\"https://www.facebook.com/OrchidProtocol/\" rel=\"noopener nofollow\">https://www.facebook.com/OrchidProtocol/</a></p><p>Medium: <a href=\"https://medium.com/orchid-labs\" rel=\"noopener\">https://medium.com/orchid-labs</a></p><p>Github: <a href=\"https://github.com/OrchidProtocol\">https://github.com/OrchidProtocol</a></p><p>Reddit: <a href=\"https://www.reddit.com/r/orchid\" rel=\"noopener nofollow\">https://www.reddit.com/r/orchid</a></p>","url":"https://orchid-ghost-admin.circleclick.com/introducing-nanopayments/","uuid":"b77815e0-f652-4c72-aef3-d0d0823cb802","page":false,"codeinjection_foot":null,"codeinjection_head":null,"codeinjection_styles":null,"comment_id":"5dd46444c9410b04e25f76fe"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"introducing-nanopayments"}}}